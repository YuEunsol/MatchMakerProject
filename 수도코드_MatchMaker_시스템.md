MatchMaker 매칭 시스템 - 핵심 로직
==================================

## 1. 데이터 준비 및 초기화

1.1. CSV 파일들을 로드하여 하나의 테이블로 병합
1.2. 생년월일 → 나이 계산 후 컬럼 추가
1.3. 성별로 데이터 분리 (여성/남성)
1.4. AI 모델 초기화 (SentenceTransformer)

## 2. 매칭 프로세스 (단방향/쌍방향 모드별)

2.1. 각 사용자에 대해 반복 처리
2.2. Hard Filter 적용 (나이 + 거리 조건)
2.3. 중복 매칭 제외 (이미 추천된 사용자 제거)
2.4. Soft Filter 적용 (점수 계산)
2.5. 매칭 결과 저장

## 3. Hard Filter 로직

3.1. 나이 조건: min_age ≤ 상대방나이 ≤ max_age
3.2. 거리 조건: 두 좌표간 거리 ≤ 설정거리
3.3. 조건 만족하는 후보자만 통과

## 4. Soft Filter 점수 계산 (6가지 요소)

4.1. 체형 점수 = 1.0 - (체형차이 / 6)
4.2. 학력 점수 = 1.0 - (학력차이 / 5)
4.3. 종교 점수 = 1.0 - (종교차이 / 5)
4.4. 흡연 점수 = 동일하면 1.0, 다르면 0.0
4.5. 음주 점수 = 1.0 - (음주차이 / 4)
4.6. 태그 점수 = AI 유사도 분석 (SentenceTransformer + 코사인 유사도)

## 5. AI 태그 유사도 계산

5.1. 사용자 태그를 "#"으로 분리
5.2. 각 태그를 AI 모델로 벡터화 (임베딩)
5.3. 코사인 유사도 매트릭스 생성
5.4. 각 태그별 최대 유사도 추출 후 평균 계산

## 6. 매칭 모드별 점수 처리

6.1. **단방향 모드**: A→B 점수만 계산, 3.0 이상만 통과
6.2. **쌍방향 모드**: A→B, B→A 둘 다 계산, 둘 다 3.0 이상일 때 평균값 사용

## 7. 결과 저장 로직

7.1. 기존 매칭 데이터 로드
7.2. 중복 체크 (user_no + rec_user_no + score_mode 조합)
7.3. 새로운 매칭 레코드 생성 (점수, 날짜, 상태 정보 포함)
7.4. user_matching.csv에 추가 저장

## 8. 시스템 실행 흐름

8.1. 데이터 로드 → 전처리 → AI 모델 초기화
8.2. 여성 사용자들 → 남성 후보자 매칭
8.3. 남성 사용자들 → 여성 후보자 매칭
8.4. 진행상황 출력 및 소요시간 측정

## 9. 핵심 필터링 조건

9.1. **1차 필터**: 나이 범위 + 지리적 거리
9.2. **2차 필터**: 프로필 유사도 (6가지 요소 종합)
9.3. **품질 필터**: 총점 3.0 이상만 매칭 대상
9.4. **중복 방지**: 동일한 매칭은 한 번만 생성

## 10. 출력 정보

10.1. 실시간 진행 상황 (사용자별 후보자 수)
10.2. 매칭 점수 상세 (A→B, B→A, 총점)
10.3. 모드별 총 소요시간
10.4. 저장된 매칭 레코드 수
